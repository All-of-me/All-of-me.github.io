import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as u,o as h,a as Y,b as m,h as p,f as L,x as y,g as S,bm as I,F as k,k as E,bo as a,c as P,p as d,j as f,e as c,t as g}from"./index-BOWCfydN.js";const $={__name:"ParallaxScreen",setup(x){const e=u(null),n=u(0),l=(r,t=16)=>{let i=0;return(...w)=>{const b=Date.now();b-i>=t&&(r(...w),i=b)}},o=r=>{var t,i;n.value=(i=(t=r==null?void 0:r.target)==null?void 0:t.scrollTop)!=null?i:0,console.log(n.value),e.value.dispatchEvent(new CustomEvent("parallax-scroll",{detail:{scrollY:n.value}}))},s=l(o);return h(()=>{setTimeout(()=>{e.value.parentElement.addEventListener("scroll",s)},1e3),o()}),Y(()=>{window.removeEventListener("scroll",s)}),(r,t)=>(p(),m("div",{ref_key:"parallaxContainer",ref:e,class:"parallax-container relative w-full h-screen overflow-hidden"},[L(r.$slots,"default",{},void 0,!0)],512))}},N=v($,[["__scopeId","data-v-bab8fa46"]]),B={__name:"ParallaxLayer",props:{speed:{type:Number,required:!0},initialX:{type:Number,default:0},initialY:{type:Number,default:0},containerSelector:{type:String,default:".parallax-container"}},setup(x){const e=x,n=u(null),l=u(0),o=u(0),s=y(()=>{const t=e.initialY+l.value*e.speed;return{transform:"translate(".concat(e.initialX,"px, ").concat(t,"px)")}}),r=t=>{l.value=t.detail.scrollY};return h(()=>{const t=n.value.closest(e.containerSelector);t&&(t.addEventListener("parallax-scroll",r),o.value=t.offsetHeight)}),Y(()=>{var i;const t=(i=n.value)==null?void 0:i.closest(e.containerSelector);t&&t.removeEventListener("parallax-scroll",r)}),(t,i)=>(p(),m("div",{ref_key:"layerRef",ref:n,class:"absolute inset-0 transition-transform duration-100 ease-out",style:S(s.value)},[L(t.$slots,"default",{},void 0,!0)],4))}},_=v(B,[["__scopeId","data-v-7c7dc35f"]]),C={class:"parallax-demo h-100% overflow-auto"},D={class:"absolute top-[40%] left-1/2 transform -translate-x-1/2 text-white text-center"},T={class:"text-[clamp(2rem,5vw,4rem)] font-bold mb-6"},F={class:"text-[clamp(1rem,2vw,1.5rem)] max-w-2xl mx-auto"},H={__name:"ParallaxDemo",setup(x){const e=I({initial:1e3,speedList:[.2,.5,.8,-.3],initialList:[0,100,200,150],list:[{title:"视差滚动效果演示",desc:"探索多层次滚动带来的沉浸式体验，感受深度与动态的完美结合"},{title:"第二屏",desc:"探索多层次滚动带来的沉浸式体验，感受深度与动态的完美结合"},{title:"第三屏",desc:"探索多层次滚动带来的沉浸式体验，感受深度与动态的完美结合"}],getInitialY(n,l){const o=e.speedList.findIndex(s=>s===l);return e.initialList[o]-e.initial*l*n}});return(n,l)=>(p(),m("div",C,[(p(!0),m(k,null,E(a(e).list,(o,s)=>(p(),P(N,{key:s},{default:d(()=>[f(_,{speed:a(e).speedList[0],initialY:a(e).getInitialY(s,a(e).speedList[0])},{default:d(()=>l[0]||(l[0]=[c("div",{class:"absolute inset-0 bg-gradient-to-b from-blue-900 to-indigo-900"},null,-1),c("div",{class:"absolute top-[10%] left-[10%] w-[80%] h-[80%] bg-stars opacity-60"},null,-1)])),_:2,__:[0]},1032,["speed","initialY"]),f(_,{speed:a(e).speedList[1],initialY:a(e).getInitialY(s,a(e).speedList[1])},{default:d(()=>l[1]||(l[1]=[c("div",{class:"absolute top-[20%] left-[15%] w-[300px] h-[300px] bg-planet-blue rounded-full"},null,-1),c("div",{class:"absolute top-[30%] right-[20%] w-[200px] h-[200px] bg-planet-purple rounded-full"},null,-1)])),_:2,__:[1]},1032,["speed","initialY"]),f(_,{speed:a(e).speedList[2],initialY:a(e).getInitialY(s,a(e).speedList[2])},{default:d(()=>l[2]||(l[2]=[c("div",{class:"absolute bottom-[10%] left-[10%] w-[400px] h-[200px] bg-rocket"},null,-1),c("div",{class:"absolute bottom-[15%] right-[15%] w-[300px] h-[150px] bg-satellite"},null,-1)])),_:2,__:[2]},1032,["speed","initialY"]),f(_,{speed:a(e).speedList[3],initialY:a(e).getInitialY(s,a(e).speedList[3])},{default:d(()=>[c("div",D,[c("h1",T,g(o.title),1),c("p",F,g(o.desc),1)])]),_:2},1032,["speed","initialY"])]),_:2},1024))),128))]))}},X=v(H,[["__scopeId","data-v-5dda997a"]]);export{X as default};
